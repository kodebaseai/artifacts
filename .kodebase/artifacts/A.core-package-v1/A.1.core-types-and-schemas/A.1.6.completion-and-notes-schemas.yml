metadata:
  title: Add schemas for notes, implementation_notes, and impact_summary
  priority: high
  estimation: S
  created_by: "Miguel Carvalho (m@kodebase.ai)"
  assignee: "Miguel Carvalho (m@kodebase.ai)"
  schema_version: "0.0.1"
  relationships:
    blocks: [A.1.5]
    blocked_by: [A.1.4]
  events:
    - event: draft
      timestamp: "2025-10-29T15:55:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: artifact_created
    - event: blocked
      timestamp: "2025-10-29T15:56:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: has_dependencies
      metadata:
        blocking_dependencies:
          - artifact_id: A.1.3
            resolved: true
            resolved_at: "2025-10-29T18:10:40Z"
    - event: ready
      timestamp: "2025-10-29T18:10:40Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: dependencies_met
    - event: in_progress
      timestamp: "2025-10-29T18:25:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: branch_created
    - event: in_review
      timestamp: "2025-10-29T19:23:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: pr_ready
    - event: completed
      timestamp: "2025-10-29T19:27:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: pr_merged
content:
  summary: >-
    Introduce root-level schemas for stakeholder and developer completion fields
    across artifacts: impact_summary (Milestones/Initiatives), implementation_notes (Issues),
    and a shared notes field. Align shapes with artifacts spec for concise, high-signal content.
  acceptance_criteria:
    - Define Zod schemas for root-level fields: impact_summary (M/I), implementation_notes (Issues), and notes
    - Keep content schemas unchanged; fields live at the artifact root, not inside content or events
    - Provide minimal helpers/types for consumers to detect presence and shape
    - Add unit tests covering valid/invalid examples
  implementation_notes:
    result: >-
      Added root-level completion and commentary fields across artifacts with registry metadata and tests: Implementation
      Notes for Issues, shared Notes for all types, Impact Summary for Initiatives, and Delivery Summary for Milestones.
      Integrated into composed schemas without changing content shapes; exported types enable downstream detection.
    tags: [core, schemas, zod-registry, completion-fields, notes]
    challenges:
      - challenge: "Clarifying completion fields per type without bloating content schemas"
        solution: "Kept fields at the artifact root with concise shapes; used Delivery Summary for milestones and Impact Summary for initiatives."
      - challenge: "Ensuring discoverability and consistent UI metadata across new fields"
        solution: "Registered each subfield in dedicated registries with titles, descriptions, and examples for UI generation."
      - challenge: "Validating presence/shape while keeping fields optional and backwards-compatible"
        solution: "Added compose-level tests and parser cases; optional schemas with strong element constraints (trimmed strings, non-empty arrays)."
      - challenge: "Providing actionable validation messages for common mistakes"
        solution: "Extended error formatter path hints (e.g., implementation_notes.result) and added fixture-backed tests."
    insights:
      - "Root-level completion/notes fields keep content focused while capturing stakeholder and developer outcomes."
      - "Registry-first design enables documentation and UI forms with minimal bespoke code."
      - "Optional fields prevent breaking changes; tests guard structure and messaging as the model evolves."
