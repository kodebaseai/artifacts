metadata:
  title: Public API, Docs, Packaging
  priority: high
  estimation: S
  created_by: "Miguel Carvalho (m@kodebase.ai)"
  assignee: "Miguel Carvalho (m@kodebase.ai)"
  schema_version: "0.0.1"
  relationships:
    blocks: [A.9]
    blocked_by: [A.7]
  events:
    - event: draft
      timestamp: "2025-10-27T20:48:44Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: artifact_created
    - event: blocked
      timestamp: "2025-10-28T14:44:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: has_dependencies
      metadata:
        blocking_dependencies:
          - artifact_id: A.7
            resolved: true
            resolved_at: "2025-11-01T21:05:00Z"
    - event: ready
      timestamp: "2025-11-01T21:05:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: dependencies_met
    - event: in_progress
      timestamp: "2025-11-01T21:08:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: children_started
    - event: in_review
      timestamp: "2025-11-01T23:36:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: children_completed
    - event: completed
      timestamp: "2025-11-01T23:45:00Z"
      actor: "Miguel Carvalho (m@kodebase.ai)"
      trigger: pr_merged
content:
  summary: >-
    Finalize the core's public surface, documentation, and packaging so that it
    is easy to consume and tree-shake.
  deliverables:
    - Curated index.ts exports (remove non-MVP surfaces)
    - README and docs aligned with actual exports
    - Clean ESM build and type declarations
  validation:
    - CLI consumes stable surface without workarounds
    - Docs match exports; smoke tests pass for ESM imports and d.ts
delivery_summary:
  outcome: >-
    Complete public API stabilization with comprehensive JSDoc documentation (~95% coverage),
    curated exports, README alignment, ESM build infrastructure, and smoke tests; package ready
    for npm publishing with proper type declarations, source maps, and CI validation.
  delivered:
    - "API surface curation (A.8.1) with cleaned-up index.ts exports removing internal utilities and consolidating public API into 12 module groups; ~25% â†’ 95% documentation coverage with comprehensive JSDoc examples."
    - "Documentation and cross-linking (A.8.2) with JSDoc for all public functions across 11 modules (parser, validator, state machine, events, cascade, loading, wizard, builder, error formatting, dependency validation) plus Error Formatting section added to README.md; all 333 tests maintained at 97% coverage."
    - "ESM build and smoke tests (A.8.3) with TypeScript compilation to dist/, comprehensive import validation (12 module groups), type completeness tests, package validation tools (publint, attw), and CI integration; fixed Zod v4 type bugs and exported missing types (TArtifactMetadata, TEvent)."
  next: >-
    Publish @kodebase/core@0.4.0 to npm with proper build artifacts, integrate package into
    CLI tooling for artifact management workflows, and leverage smoke tests as regression suite
    for future API changes.
  risks:
    - "Type declarations depend on Zod v4 which has locale type bugs - mitigated with skipLibCheck in test configuration (industry standard workaround)."
    - "Package validation with attw --pack hangs during packing phase - validation works when testing published package from npm, suggest running manually before major releases."
