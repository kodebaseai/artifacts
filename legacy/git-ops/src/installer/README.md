# Hook Installer

The hook installer module provides utilities for installing and managing git hooks in a repository to integrate with the Kodebase methodology.

## Overview

The `HookInstaller` class manages the installation, uninstallation, and status checking of git hooks. It ensures hooks are properly installed with the correct permissions and can backup existing hooks before replacement.

## Usage

### Installing Hooks

```typescript
import { HookInstaller } from '@kodebase/git-ops';

const installer = new HookInstaller();

// Install all hooks
const result = await installer.install({
  repoPath: '/path/to/repo'
});

// Install specific hooks
const result = await installer.install({
  repoPath: '/path/to/repo',
  hooks: ['pre-commit', 'post-checkout']
});
```

### Uninstalling Hooks

```typescript
// Uninstall all kodebase hooks
const result = await installer.uninstall({
  repoPath: '/path/to/repo'
});

// Uninstall specific hooks and restore backups
const result = await installer.uninstall({
  repoPath: '/path/to/repo',
  hooks: ['pre-commit'],
  restoreBackups: true
});
```

### Checking Hook Status

```typescript
const statuses = await installer.status('/path/to/repo');

statuses.forEach(status => {
  console.log(`${status.name}: ${status.installed ? 'installed' : 'not installed'}`);
  if (status.installed) {
    console.log(`  Managed by kodebase: ${status.isKodebase ? 'yes' : 'no'}`);
  }
});
```

## Features

### Backup Management

- Automatically backs up existing hooks before installation
- Backup files are named with timestamps (e.g., `pre-commit.backup.1234567890`)
- Can restore backups during uninstallation

### Safety Features

- Won't overwrite existing kodebase-managed hooks
- Validates git repository before operations
- Warns if `core.hooksPath` is configured
- Only removes hooks that were installed by kodebase

### Hook Content

Installed hooks are shell scripts that delegate to the `@kodebase/git-ops` package:

```bash
#!/bin/bash
# Generated by @kodebase/git-ops
# DO NOT EDIT - This file is managed by @kodebase/git-ops

# Run the kodebase git-ops hook
npx @kodebase/git-ops run pre-commit "$@"
```

## Integration

The installer is designed to be used by:
- CLI tools for manual hook management
- Setup scripts for repository initialization
- CI/CD pipelines for automated setup
- Development environment configuration

## Error Handling

All operations return detailed results including:
- Success/failure status
- Lists of processed hooks
- Warning messages
- Error descriptions

This allows for proper error handling and user feedback in consuming applications.